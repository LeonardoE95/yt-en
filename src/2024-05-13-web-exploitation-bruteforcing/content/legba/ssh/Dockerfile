FROM ubuntu:latest

RUN apt-get update && apt-get install -y openssh-server

# Create an SSH user
RUN useradd -rm -d /home/sshuser -s /bin/bash -g root -G sudo sshuser

ARG password

# Set the SSH user's password (replace "password" with your desired password)
RUN echo "sshuser:$password" | chpasswd

RUN mkdir /var/run/sshd
EXPOSE 22

CMD ["/usr/sbin/sshd", "-D"]