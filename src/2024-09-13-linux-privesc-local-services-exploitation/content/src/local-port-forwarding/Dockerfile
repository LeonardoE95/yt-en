FROM ubuntu:latest

RUN apt-get update
RUN apt-get install sudo curl net-tools iproute2 python3-pip openssh-server python3.12-venv -y

RUN echo "ubuntu:abc123" | chpasswd
RUN mkdir /var/run/sshd
RUN chmod 0755 /var/run/sshd
EXPOSE 22

COPY ./app /app
RUN pip3 install -r /app/requirements.txt --break-system-packages

CMD ["/app/entry.sh"]